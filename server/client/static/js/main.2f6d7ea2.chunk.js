(this["webpackJsonpreact-build"]=this["webpackJsonpreact-build"]||[]).push([[0],{18:function(e){e.exports=JSON.parse('{"apiEndpoint":"http://localhost:8080/api/","isFireBase":false}')},29:function(e){e.exports=JSON.parse('[{"_id":"67rdca3eeb7f6fgeed471815","value":1,"name":"\u0414\u043e\u0448\u0438\u0440\u0430\u043a","taste":"\u0441\u043e \u0432\u043a\u0443\u0441\u043e\u043c \u043a\u0443\u0440\u0438\u0446\u044b","rating":4.8,"price":39,"reviews":379,"imgSrc":"/img/doshik.jpg","category":"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"},{"_id":"67rdca3eeb7f6fgeed471816","value":1,"name":"\u0420\u043e\u043b\u043b\u0442\u043e\u043d","taste":"\u0441\u043e \u0432\u043a\u0443\u0441\u043e\u043c \u0433\u0440\u0438\u0431\u043e\u0432","rating":4.5,"price":23,"reviews":231,"imgSrc":"/img/rollton.jpg","category":"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"},{"_id":"67rdca3eeb7f6fgeed471817","value":1,"name":"\u041c\u043e\u043b\u043e\u043a\u043e","taste":"\u0442\u043e\u043f\u043b\u0451\u043d\u043e\u0435","rating":4.4,"price":71,"reviews":12,"imgSrc":"/img/milk.jpg","category":"\u041c\u043e\u043b\u043e\u0447\u043d\u0430\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f"},{"_id":"67rdca3eeb7f6fgeed471818","value":1,"name":"\u0428\u043b\u0451\u043f\u043a\u0438","taste":"\u043d\u0435\u0443\u0431\u0438\u0432\u0430\u0435\u043c\u044b\u0435","rating":4.9,"price":300,"reviews":999,"imgSrc":"/img/shlepki.jpg","category":"\u041e\u0431\u0443\u0432\u044c"},{"_id":"67rdca3eeb7f6fgeed471819","value":1,"name":"\u041a\u0443\u0440\u0442\u043a\u0430","taste":"\u043a\u043e\u0436\u0430\u043d\u0430\u044f","rating":4,"price":3500,"reviews":9,"imgSrc":"/img/kurtka.jpg","category":"\u041e\u0434\u0435\u0436\u0434\u0430"},{"_id":"67rdca3eeb7f6fgeed471820","value":1,"name":"\u041a\u0435\u043f\u043a\u0430","taste":"","rating":3.8,"price":500,"reviews":76,"imgSrc":"/img/kepka.jpg","category":"\u0413\u043e\u043b\u043e\u0432\u043d\u044b\u0435 \u0443\u0431\u043e\u0440\u044b"},{"_id":"67rdca3eeb7f6fgeed471821","value":1,"name":"\u0411\u0435\u0433\u043e\u0432\u0430\u044f \u0434\u043e\u0440\u043e\u0436\u043a\u0430","taste":"","rating":4.1,"price":21000,"reviews":0,"imgSrc":"/img/velosiped.jpg","category":"\u0421\u043f\u043e\u0440\u0442\u0438\u0432\u043d\u044b\u0439 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c"},{"_id":"67rdca3eeb7f6fgeed471822","value":1,"name":"\u0420\u043e\u0441\u0442\u0438\u0448\u043a\u0430","taste":"\u0441\u043e \u0432\u043a\u0443\u0441\u043e\u043c \u043a\u043b\u0443\u0431\u043d\u0438\u043a\u0438","rating":3.6,"price":34,"reviews":5,"imgSrc":"/img/rastishka-klubnika.jpg","category":"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435"},{"_id":"67rdca3eeb7f6fgeed471823","value":1,"name":"\u0420\u043e\u0441\u0442\u0438\u0448\u043a\u0430","taste":"\u0441\u043e \u0432\u043a\u0443\u0441\u043e\u043c \u0431\u0430\u043d\u0430\u043d\u0430","rating":3.8,"price":35,"reviews":12,"imgSrc":"/img/rastishka-banan.jpg","category":"\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435"},{"_id":"67rdca3eeb7f6fgeed471824","value":1,"name":"\u041f\u0440\u043e\u0442\u0435\u0438\u043d","taste":"\u0441\u043e \u0432\u043a\u0443\u0441\u043e\u043c \u043a\u0430\u0440\u0430\u043c\u0435\u043b\u0438","rating":4.8,"price":1280,"reviews":38,"imgSrc":"/img/protein.jpg","category":"\u0421\u043f\u043e\u0440\u0442\u0438\u0432\u043d\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435"},{"_id":"67rdca3eeb7f6fgeed471825","value":1,"name":"\u041a\u0435\u0444\u0438\u0440","taste":"","rating":4.2,"price":79,"reviews":34,"imgSrc":"/img/kefir.jpg","category":"\u041c\u043e\u043b\u043e\u0447\u043d\u0430\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f"}]')},50:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(23),s=n.n(c),i=(n(50),n(4)),o=n(7),u=n(2),l=n(3),d=n.n(l),j=n(6),m=n(10);function b(e){switch(e){case"INVALID_PASSWORD":case"EMAIL_NOT_FOUND":return"Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e";case"EMAIL_EXISTS":return"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c Email \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442";default:return"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043f\u044b\u0442\u043e\u043a \u0432\u0445\u043e\u0434\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0434\u043d\u0435\u0435"}}var h=n(11),f=Object(h.createBrowserHistory)(),p=n(24),O=n.n(p),v="jwt-token",g="jwt-refresh-token",_="jwt-expires",x="user-local-id";var N={setTokens:function(e){var t=e.refreshToken,n=e.accessToken,r=e.userId,a=e.expiresIn,c=void 0===a?3600:a,s=(new Date).getTime()+1e3*c;localStorage.setItem(x,r),localStorage.setItem(v,n),localStorage.setItem(g,t),localStorage.setItem(_,s)},getAccessToken:function(){return localStorage.getItem(v)},getRefreshToken:function(){return localStorage.getItem(g)},getTokenExpiresDate:function(){return localStorage.getItem(_)},getUserId:function(){return localStorage.getItem(x)},removeAuthData:function(){localStorage.removeItem(x),localStorage.removeItem(v),localStorage.removeItem(g),localStorage.removeItem(_)}},k=n(18),w=O.a.create({baseURL:k.apiEndpoint+"auth/",params:{key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_FIREBASE_KEY}}),y={register:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("signUp",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.next=3,w.post("signInWithPassword",{email:n,password:r,returnSecureToken:!0});case 3:return a=e.sent,c=a.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),refreshToken:function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post("token",{grant_type:"refresh_token",refresh_token:N.getRefreshToken()});case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},S=y,C=n(5),I=O.a.create({baseURL:k.apiEndpoint});I.interceptors.request.use(function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r,a,c,s,i,o,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=N.getTokenExpiresDate(),r=N.getRefreshToken(),a=r&&n<Date.now(),!k.isFireBase){e.next=15;break}if(c=/\/$/gi.test(t.url),t.url=(c?t.url.slice(0,-1):t.url)+".json",!a){e.next=11;break}return e.next=9,S.refreshToken();case 9:s=e.sent,N.setTokens({refreshToken:s.refresh_token,idToken:s.id_token,expiresIn:s.expires_in,localId:s.user_id});case 11:(i=N.getAccessToken())&&(t.params=Object(C.a)(Object(C.a)({},t.params),{},{auth:i})),e.next=22;break;case 15:if(!a){e.next=20;break}return e.next=18,S.refreshToken();case 18:o=e.sent,N.setTokens(o);case 20:(u=N.getAccessToken())&&(t.headers=Object(C.a)(Object(C.a)({},t.headers),{},{Authorization:"Bearer ".concat(u)}));case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),I.interceptors.response.use((function(e){var t;return k.isFireBase?e.data={content:(t=e.data,t&&!t._id?Object.keys(t).map((function(e){return Object(C.a)({},t[e])})):t)}:e.data={content:e.data},e}),(function(e){return e.response&&e.response.status>=400&&e.response.status<500||console.log("Somthing was wrong. Try it later"),Promise.reject(e)}));var L={get:I.get,post:I.post,put:I.put,delete:I.delete,patch:I.patch},R="users/",E={get:function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(R);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.put(R+t._id,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getCurrentUser:function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(R+N.getUserId());case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getParamsUser:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(R+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.patch(R+N.getUserId(),t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},z=E,D=N.getAccessToken()?{entities:null,isLoading:!0,error:null,auth:{userId:N.getUserId()},paramsUserData:null,isLoggedIn:!0,dataLoaded:!1}:{entities:null,isLoading:!1,error:null,auth:null,paramsUserData:null,isLoggedIn:!1,dataLoaded:!1},T=Object(m.createSlice)({name:"users",initialState:D,reducers:{usersRequested:function(e){e.isLoading=!0},usersReceived:function(e,t){e.entities=t.payload,e.isLoading=!1,e.dataLoaded=!0},usersReceivedFailed:function(e,t){e.error=t.payload,e.isLoading=!1},usersRequestedSuccess:function(e,t){e.auth=t.payload,e.isLoggedIn=!0},usersRequestedFailed:function(e,t){e.error=t.payload},usersUpdated:function(e,t){var n=e.entities.findIndex((function(e){return e._id===t.payload._id}));e.entities[n]=t.payload},userSignOut:function(e){e.auth=null,e.isLoggedIn=!1,e.dataLoaded=!1},authRequested:function(e){e.error=null}}}),F=T.reducer,M=T.actions,A=M.usersRequested,B=M.usersReceived,q=M.usersReceivedFailed,P=M.usersRequestedSuccess,U=M.usersRequestedFailed,H=M.usersUpdated,J=M.userSignOut,Y=Object(m.createAction)("users/authRequested"),V=Object(m.createAction)("users/userUpdateRequested"),W=function(){return function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(A()),e.prev=1,e.next=4,z.get();case 4:n=e.sent,r=n.content,t(B(r)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(q(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},Z=function(e){return function(t){if(t.users.entities)return t.users.entities.find((function(t){return t._id===e}))}},K=function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(V()),t.prev=1,t.next=4,z.update(e);case 4:r=t.sent,n(H(r.content)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(U());case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},$=F,G=n.p+"static/media/default-user.6d5d8a5a.png",X=n(0),Q=function(e){var t=e.userId,n=Object(u.c)(Z(t)),r=function(){document.querySelector(".dropdown__list").classList.toggle("dropdown__list-active")};return Object(X.jsx)(X.Fragment,{children:n&&Object(X.jsxs)("div",{className:"dropdown",children:[Object(X.jsxs)("h2",{className:"dropdown__title",onClick:r,children:[Object(X.jsx)("img",{src:n.img?n.img:G,alt:"user"}),Object(X.jsx)("span",{children:n?n.name:"\u0410\u041d\u041e\u041d\u0418\u041c !!!"})]}),Object(X.jsxs)("div",{className:"dropdown__list",onClick:r,children:[Object(X.jsx)(o.a,{to:"/profile/".concat(t),className:"dropdown__list-link",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(X.jsx)(o.a,{to:"/signout",className:"dropdown__list-link",children:"\u0412\u044b\u0439\u0442\u0438"})]})]})})},ee=Object(m.createSlice)({name:"favourites",initialState:{entities:null,entitiesAmount:0},reducers:{favouritesReceived:function(e,t){e.entities=t.payload},favouritesReceivedLength:function(e,t){e.entitiesAmount=t.payload}}}),te=ee.reducer,ne=ee.actions,re=ne.favouritesReceived,ae=ne.favouritesReceivedLength,ce=Object(m.createAction)("favourites/favouritesRequested"),se=function(e){return function(t){if(t.favourites.entities)return t.favourites.entities.find((function(t){return t._id===e}))}},ie=function(e){return function(t,n){var r,a=function(e){if(e.users.auth)return e.users.auth.userId}(n()),c=JSON.parse(localStorage.getItem("productsFavorite-".concat(a)));if(null===c?c=[]:c.length>0&&(r=c.findIndex((function(t){return t._id===e._id}))),r>=0){var s=c.filter((function(t){return t._id!==e._id}));localStorage.setItem("productsFavorite-".concat(a),JSON.stringify(s)),t(re(s)),t(ae(s.length))}else c.push(e),localStorage.setItem("productsFavorite-".concat(a),JSON.stringify(c)),t(re(c)),t(ae(c.length))}},oe=te,ue=Object(m.createSlice)({name:"basket",initialState:{entities:null,entitiesAmount:0,totalSumOfOrder:0},reducers:{basketReceived:function(e,t){e.entities=t.payload},basketReceivedLength:function(e,t){e.entitiesAmount=t.payload},basketReceivedLengthLess:function(e,t){e.entitiesAmount-=t.payload},basketClean:function(e){e.entities=null,e.entitiesAmount=0},basketDeleteProductById:function(e,t){e.entities=e.entities.filter((function(e){return e._id!==t.payload._id}))},basketChangeTotalSum:function(e,t){e.totalSumOfOrder=t.payload}}}),le=ue.reducer,de=ue.actions,je=de.basketReceived,me=de.basketReceivedLength,be=de.basketReceivedLengthLess,he=de.basketClean,fe=de.basketDeleteProductById,pe=de.basketChangeTotalSum,Oe=Object(m.createAction)("basket/basketRequested"),ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return function(r,a){var c,s=function(e){if(e.users.auth)return e.users.auth.userId}(a()),i=JSON.parse(localStorage.getItem("productsBasket-".concat(s)));null===i?i=[]:i.length>0&&(c=i.findIndex((function(t){return t._id===e._id}))),c>=0?(n?(i[c].value-=t,i[c].value<=0&&i.splice(i[c],1)):i[c].value+=t,localStorage.setItem("productsBasket-".concat(s),JSON.stringify(i)),r(je(i)),r(me(i.length))):(i.push(e),localStorage.setItem("productsBasket-".concat(s),JSON.stringify(i)),r(je(i)));var o=0;i.forEach((function(e){o+=e.value})),r(me(o)),r(pe(ge(i)))}};function ge(e){var t=0;return e&&e.forEach((function(e){t+=e.price*e.value})),t}var _e=le,xe=function(){var e=Object(u.c)((function(e){return e.favourites.entitiesAmount})),t=Object(u.c)((function(e){return e.basket.entitiesAmount})),n=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),a=function(){var e=Object(r.useState)([document.documentElement.clientWidth,document.documentElement.clientHeight]),t=Object(i.a)(e,2),n=t[0],a=t[1],c=function(){a([document.documentElement.clientWidth,document.documentElement.clientHeight])};return Object(r.useEffect)((function(){return window.addEventListener("resize",c),function(){return window.removeEventListener("resize",c)}}),[n]),n}(),c=Object(i.a)(a,1)[0],s=document.querySelector(".header__burger"),l=document.querySelector(".header__menu"),d=document.querySelector("body"),j=function(){s&&(s.classList.toggle("active"),l.classList.toggle("active"),d.classList.toggle("lock"))};return Object(r.useEffect)((function(){c>=768&&s&&l&&(s.classList.remove("active"),l.classList.remove("active"),d.classList.remove("lock"))}),[c]),Object(X.jsx)("div",{className:"header",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("div",{className:"header__body",children:[Object(X.jsx)("div",{className:"header__logo",children:"LOGO"}),Object(X.jsx)("div",{className:"header__burger",onClick:j,children:Object(X.jsx)("span",{})}),Object(X.jsx)("nav",{className:"header__menu",children:Object(X.jsxs)("ul",{className:"header__list",children:[Object(X.jsx)("li",{onClick:j,children:Object(X.jsx)(o.a,{to:"/products",className:"header__link",children:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b"})}),n&&Object(X.jsxs)("li",{onClick:j,children:[Object(X.jsx)(o.a,{to:"/favorites",className:"header__link",children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),e>0&&Object(X.jsx)("span",{className:"header__count-favorites",children:e})]}),n&&Object(X.jsxs)("li",{onClick:j,children:[Object(X.jsx)(o.a,{to:"/basket",className:"header__link",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),t>0&&Object(X.jsx)("span",{className:"header__count-basket",children:t})]}),n?Object(X.jsx)("li",{onClick:j,children:Object(X.jsx)("div",{children:Object(X.jsx)(Q,{userId:n})})}):Object(X.jsx)("li",{onClick:j,children:Object(X.jsx)(o.a,{to:"/authorization",className:"header__button",children:"\u0412\u0445\u043e\u0434"})})]})})]})})})},Ne=n(16),ke=n(43);function we(e,t){var n={};function r(e,t,n){var r;switch(e){case"isRequired":r=""===t.trim();break;case"isEmail":r=!/^\S+@\S+\.\S+$/g.test(t);break;case"isCapitalSymbol":r=!/[A-Z]+/g.test(t);break;case"isContainDigit":r=!/\d+/g.test(t);break;case"minValue":r=t.length<n.value}if(r)return n.message}for(var a in e)for(var c in t[a]){var s=r(c,e[a],t[a][c]);s&&!n[a]&&(n[a]=s)}return n}var ye=function(e){var t=e.type,n=e.onChange,a=e.value,c=e.error,s=e.classNameInput,o=e.messagePlaceholder,u=e.name,l=Object(r.useState)(!1),d=Object(i.a)(l,2),j=d[0],m=d[1];return Object(X.jsxs)("article",{children:[Object(X.jsx)("input",{type:j?"text":t,name:u,className:s,placeholder:o,onChange:n,value:a}),c&&Object(X.jsx)("p",{children:c[u]}),"password"===t&&Object(X.jsxs)("svg",{className:"authorization__password-eye"+(j?" authorization__password-eye-open":""),onClick:function(){m((function(e){return!e}))},width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(X.jsx)("path",{d:"M21.257 10.962C21.731 11.582 21.731 12.419 21.257 13.038C19.764 14.987 16.182 19 12 19C7.81801 19 4.23601 14.987 2.74301 13.038C2.51239 12.7411 2.38721 12.3759 2.38721 12C2.38721 11.6241 2.51239 11.2589 2.74301 10.962C4.23601 9.013 7.81801 5 12 5C16.182 5 19.764 9.013 21.257 10.962V10.962Z",stroke:"black",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"}),Object(X.jsx)("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"black",strokeWidth:"1.3",strokeLinecap:"round",strokeLinejoin:"round"})]})]})};ye.defaultProps={type:"text"};var Se=ye,Ce=function(){var e=Object(ke.useHistory)(),t=Object(r.useState)({email:"",password:"",rememberMe:!0}),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(u.b)(),l=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),m=Object(r.useState)(),h=Object(i.a)(m,2),p=h[0],O=h[1],v=Object(u.c)((function(e){return e.users.error})),g=function(e){var t=e.target;c((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(Ne.a)({},t.name,t.value))}))},_={email:{isRequired:{message:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}},password:{isRequired:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"}}},x=!1;p&&0===Object.keys(p).length&&(x=!0),Object(r.useEffect)((function(){k()}),[a]);var k=function(){var e=we(a,_);return O(e),0===Object.keys(e).length};return l&&e.push("/"),Object(X.jsx)("main",{className:"shop authorization",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("section",{className:"authorization__body",children:[Object(X.jsx)("h2",{className:"authorization__title title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(X.jsxs)("form",{action:"#",className:"authorization__form",onSubmit:function(t){if(t.preventDefault(),k()){var n=e.location.state?e.location.state.from:"/products";s(function(e){var t=e.payload,n=e.redirect;return function(){var e=Object(j.a)(d.a.mark((function e(r){var a,c,s,i,o,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,c=t.password,r(Y()),e.prev=2,e.next=5,S.login({email:a,password:c});case 5:s=e.sent,N.setTokens(s),r(P({userId:s.userId})),f.push(n),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),i=e.t0.response.data.error,o=i.code,u=i.message,400===o?(l=b(u),r(U(l))):r(U(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()}({payload:a,redirect:n}))}},children:[Object(X.jsx)(Se,{name:"email",value:a.email,onChange:g,error:p,messagePlaceholder:"Email",classNameInput:"authorization__email"}),Object(X.jsx)(Se,{type:"password",name:"password",value:a.password,onChange:g,error:p,messagePlaceholder:"Password",classNameInput:"authorization__password"}),Object(X.jsxs)("label",{htmlFor:"rememberMe",children:[Object(X.jsx)("input",{name:"rememberMe",type:"checkbox",id:"rememberMe",value:"",checked:a.rememberMe,onChange:function(){c((function(e){return Object(C.a)(Object(C.a)({},e),{},{rememberMe:!a.rememberMe})}))},className:"authorization__form-checkbox-real"}),Object(X.jsx)("span",{className:"authorization__form-checkbox-fake",children:Object(X.jsx)("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(X.jsx)("path",{d:"M14 1L4 11.01L1 8.01",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Object(X.jsx)("span",{className:"authorization__form-checkbox-text",children:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"})]}),v&&Object(X.jsx)("p",{className:"authorization__error",children:v}),Object(X.jsx)("button",{type:"submit",className:"authorization__submit"+(!x||v?" authorization__submit-not-active":""),children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(X.jsx)(o.a,{to:"/registration",className:"authorization__registration hover",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(X.jsx)(o.a,{to:"/registration",className:"authorization__registration hover",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"})]})})})},Ie=n(9);function Le(e){var t=new Date(e),n=new Date;if(0===n.getFullYear()-t.getFullYear()){if(0===n.getDay()-t.getDay()){if(0===n.getHours()-t.getHours()){var r=n.getMinutes()-t.getMinutes();return r>=0&&r<5?"1 \u043c\u0438\u043d\u0443\u0442\u0443 \u043d\u0430\u0437\u0430\u0434":r>=5&&r<10?"5 \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434":r>=10&&r<30?"10 \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434":"30 \u043c\u0438\u043d\u0443\u0442 \u043d\u0430\u0437\u0430\u0434"}return"".concat(t.getHours(),":").concat(t.getMinutes())}return t.getDate()<10&&t.getMonth()>=9?"0".concat(t.getDate(),".").concat(t.getMonth()+1,".").concat(t.getFullYear()):t.getDate()>=10&&t.getMonth()<9?"".concat(t.getDate(),".0").concat(t.getMonth()+1,".").concat(t.getFullYear()):t.getDate()<10&&t.getMonth()<9?"0".concat(t.getDate(),".0").concat(t.getMonth()+1,".").concat(t.getFullYear()):"".concat(t.getDate(),".").concat(t.getMonth()+1,".").concat(t.getFullYear())}return t.getFullYear()+"."+(t.getMonth()+1)+"."+t.getDate()}var Re=function(){var e=Object(Ie.useHistory)(),t=Object(u.b)(),n=Object(r.useState)({name:"",lastName:"",email:"",password:"",registerDate:"",img:"",amountReviews:0}),a=Object(i.a)(n,2),c=a[0],s=a[1],l=Object(r.useState)(),m=Object(i.a)(l,2),h=m[0],p=m[1],O=function(e){var t=e.target;s((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(Ne.a)({},t.name,t.value))}))},v=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),g=Object(u.c)((function(e){return e.users.error})),_={name:{isRequired:{message:"\u0418\u043c\u044f \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},minValue:{message:"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 3 \u0431\u0443\u043a\u0432",value:3}},email:{isRequired:{message:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u0430 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},isEmail:{message:"\u042d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430 \u0432\u0432\u0435\u0434\u0435\u043d\u0430 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e"}},password:{isRequired:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u0435\u043d \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"},isCapitalSymbol:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u0443 \u0437\u0430\u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0431\u0443\u043a\u0432\u0443"},isContainDigit:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u043e \u0447\u0438\u0441\u043b\u043e"},minValue:{message:"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043a\u0430\u043a \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0437\u043d\u0430\u043a\u043e\u0432",value:8}}},x=!1;h&&0===Object.keys(h).length&&(x=!0),Object(r.useEffect)((function(){k()}),[c]);var k=function(){var e=we(c,_);return p(e),0===Object.keys(e).length};return v&&e.push("/"),Object(X.jsx)("main",{className:"shop authorization",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("section",{className:"authorization__body",children:[Object(X.jsx)("h2",{className:"authorization__title title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(X.jsxs)("form",{action:"#",className:"authorization__form",onSubmit:function(e){if(e.preventDefault(),k()){var n,r=Date.now(),a=function(e){var t=new Date(parseInt(e));return t.getDate()<10&&t.getMonth()>=9?"0".concat(t.getDate(),".").concat(t.getMonth(),".").concat(t.getFullYear()):t.getDate()>=10&&t.getMonth()<9?"".concat(t.getDate(),".0").concat(t.getMonth(),".").concat(t.getFullYear()):t.getDate()<10&&t.getMonth()<9?"0".concat(t.getDate(),".0").concat(t.getMonth(),".").concat(t.getFullYear()):"".concat(t.getDate(),".").concat(t.getMonth(),".").concat(t.getFullYear())}(parseInt(r)),s=Object(C.a)(Object(C.a)({},c),{},{email:c.email,password:c.password,registerDate:a});t((n=s,function(){var e=Object(j.a)(d.a.mark((function e(t){var r,a,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Y()),e.prev=1,e.next=4,S.register(n);case 4:r=e.sent,N.setTokens(r),t(P({userId:r.userId})),f.push("/products"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),a=e.t0.response.data.error,c=a.code,s=a.message,400===c?(i=b(s),t(U(i))):t(U(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))}},children:[Object(X.jsx)(Se,{name:"name",value:c.name,onChange:O,error:h,messagePlaceholder:"\u0418\u043c\u044f",classNameInput:"authorization__email"}),Object(X.jsx)(Se,{name:"lastName",value:c.lastName,onChange:O,error:h,messagePlaceholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",classNameInput:"authorization__email"}),Object(X.jsx)(Se,{name:"email",value:c.email,onChange:O,error:h,messagePlaceholder:"Email",classNameInput:"authorization__email"}),Object(X.jsx)(Se,{type:"password",name:"password",value:c.password,onChange:O,error:h,messagePlaceholder:"Password",classNameInput:"authorization__password"}),g&&Object(X.jsx)("p",{className:"authorization__error",children:g}),Object(X.jsx)("button",{className:"authorization__submit"+(x?"":" authorization__submit-not-active"),children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(X.jsx)(o.a,{to:"/authorization",className:"authorization__registration hover",children:"\u0412\u043e\u0439\u0442\u0438"})]})})})},Ee=function(){var e=(new Date).getFullYear();return Object(X.jsx)("footer",{className:"footer",children:Object(X.jsxs)("div",{className:"footer__content container",children:["2021 - ",e,". \u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b"]})})},ze=function(e){var t=e.name,n=Object(Ie.useParams)().profileId,r="\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c"===t?"/products":"/profile/".concat(n);return Object(X.jsx)("div",{className:"back",children:Object(X.jsxs)(o.a,{to:r,className:"hover back-link",children:[Object(X.jsx)("svg",{width:"19",height:"12",viewBox:"0 0 19 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(X.jsx)("path",{d:"M17 2V5H3.82998L6.70998 2.12C7.09998 1.73 7.09998 1.1 6.70998 0.709996C6.31998 0.319996 5.68998 0.319996 5.29998 0.709996L0.70998 5.3C0.31998 5.69 0.31998 6.32 0.70998 6.71L5.29998 11.3C5.68998 11.69 6.31998 11.69 6.70998 11.3C7.09998 10.91 7.09998 10.28 6.70998 9.89L3.82998 7H18C18.55 7 19 6.55 19 6V2C19 1.45 18.55 0.999996 18 0.999996C17.45 0.999996 17 1.45 17 2Z",fill:"white"})}),Object(X.jsx)("span",{children:t})]})})},De=function(e){var t=e.product,n=Object(u.b)();return Object(X.jsxs)("div",{className:"basket-item",children:[Object(X.jsx)("div",{className:"basket-item__column-left",children:Object(X.jsx)("img",{src:t.imgSrc,alt:"img"})}),Object(X.jsxs)("div",{className:"basket-item__column-right",children:[Object(X.jsxs)(o.a,{to:"/products/".concat(t._id),className:"product__title title",children:[t.name,""!==t.taste&&Object(X.jsxs)("span",{children:[" (",t.taste,")"]})]}),Object(X.jsx)("div",{className:"basket-item__amount",children:Object(X.jsxs)("div",{className:"item-body__amount",children:[Object(X.jsx)("div",{className:"item-body__amount-minus",onClick:function(){return n(ve(t,1,!0))},children:"-"}),Object(X.jsx)("div",{className:"item-body__amount-number",children:t.value}),Object(X.jsx)("div",{className:"item-body__amount-plus",onClick:function(){return n(ve(t))},children:"+"})]})}),Object(X.jsxs)("div",{className:"basket-item__price",children:[t.price," \u0440\u0443\u0431."]}),Object(X.jsx)("div",{className:"basket-item__close-btn",onClick:function(){return n(function(e){return function(t,n){var r=function(e){if(e.users.auth)return e.users.auth.userId}(n()),a=JSON.parse(localStorage.getItem("productsBasket-".concat(r))).filter((function(t){return t._id!==e._id}));localStorage.setItem("productsBasket-".concat(r),JSON.stringify(a)),t(fe(e)),t(be(e.value)),t(pe(ge(a)))}}(t))},children:Object(X.jsxs)("svg",{width:"27",height:"24",viewBox:"0 0 27 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(X.jsx)("rect",{y:"22.6484",width:"34.4826",height:"1",rx:"0.5",transform:"rotate(-41.057 0 22.6484)",fill:"white"}),Object(X.jsx)("rect",{width:"34.4826",height:"1",rx:"0.5",transform:"matrix(-0.754056 -0.65681 -0.65681 0.754056 26.6582 22.6484)",fill:"white"})]})})]})]})},Te=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.basket.entities})),n=Object(u.c)((function(e){return e.basket.totalSumOfOrder}));t=t&&t.length>0?t.map((function(e){return Object(X.jsx)("article",{className:"shop__basket-column-left-item",children:Object(X.jsx)(De,{product:e},e._id+"basket")},e._id)})):Object(X.jsx)("h2",{className:"shop__basket-title",children:"\u0412\u044b \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"});var a=Object(r.useState)(!1),c=Object(i.a)(a,2),s=c[0],o=c[1],l=function(){o(!0),e((function(e,t){var n=function(e){if(e.users.auth)return e.users.auth.userId}(t());localStorage.removeItem("productsBasket-".concat(n)),e(he()),e(pe(0))}))};return Object(X.jsxs)("main",{className:"shop",children:[Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(ze,{name:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c"}),Object(X.jsxs)("section",{className:"shop__basket",children:[n>0&&Object(X.jsx)("h2",{className:"shop__basket-title title",children:"\u0412\u0430\u0448\u0438 \u0442\u043e\u0432\u0430\u0440\u044b \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435:"}),Object(X.jsxs)("div",{className:"shop__basket-flex",children:[Object(X.jsx)("article",{className:"shop__basket-column-left",children:t}),Object(X.jsxs)("article",{className:"shop__basket-column-right",children:[Object(X.jsxs)("div",{className:"shop__basket__total-sum",children:["\u0418\u0442\u043e\u0433\u043e: ",Object(X.jsxs)("span",{children:[n," \u0440\u0443\u0431."]})]}),Object(X.jsx)("button",{className:"shop__basket-final-btn item-body__buy"+(n>0?" shop__basket-final-btn-active":""),onClick:function(){return l()},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})]})]}),Object(X.jsx)("div",{className:"modal-final"+(s?" modal-final-active":""),children:Object(X.jsxs)("div",{className:"modal-final__content",children:[Object(X.jsx)("div",{className:"modal-final__svg",children:Object(X.jsx)("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(X.jsx)("path",{d:"M14 1L4 11.01L1 8.01",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),Object(X.jsx)("div",{className:"modal-final__text",children:"\u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d!"}),Object(X.jsx)("div",{className:"modal-final__close-button",onClick:function(e){o(!1)},children:Object(X.jsxs)("svg",{width:"27",height:"24",viewBox:"0 0 27 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(X.jsx)("rect",{y:"22.6484",width:"34.4826",height:"1",rx:"0.5",transform:"rotate(-41.057 0 22.6484)",fill:"white"}),Object(X.jsx)("rect",{width:"34.4826",height:"1",rx:"0.5",transform:"matrix(-0.754056 -0.65681 -0.65681 0.754056 26.6582 22.6484)",fill:"white"})]})})]})})]})},Fe=function(e){var t=e.onSubmit,n=e.productId,a=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),c=Object(r.useState)({}),s=Object(i.a)(c,2),o=s[0],l=s[1],d=function(){l({})};return Object(X.jsx)(X.Fragment,{children:a&&Object(X.jsx)("article",{className:"comments__add",children:Object(X.jsxs)("form",{className:"comments__add-form",children:[Object(X.jsx)("textarea",{name:"content",id:"comment",placeholder:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043e\u0442\u0437\u044b\u0432",className:"comments__add-textarea",onChange:function(e){var t=e.target;l((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(Ne.a)({},t.name,t.value))}))},value:o.content||""}),Object(X.jsx)("button",{type:"button",className:"comments__add-submit"+(o.content?" comments__add-submit-active":""),onClick:function(e){e.preventDefault(),t(o,n),d()},children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})})})},Me=function(e){var t=e.content,n=e.created_at,r=e._id,a=e.userId,c=e.onRemove,s=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),i=Object(u.c)(Z(a));return Object(X.jsx)(X.Fragment,{children:Object(X.jsxs)("article",{className:"comments__item",children:[Object(X.jsxs)("div",{className:"comments__item-flex",children:[Object(X.jsx)("div",{className:"comments__item-avatar",children:Object(X.jsx)("img",{src:"/img/users/default-user.png",alt:"avatar"})}),Object(X.jsxs)("div",{className:"comments__item-content",children:[Object(X.jsxs)("div",{className:"comments__item-header",children:[Object(X.jsxs)("p",{className:"comments__item-name",children:[Object(X.jsx)("span",{children:function(e){if(e)return e.slice(0,1).toUpperCase()+e.slice(1)}(i.name)}),Object(X.jsx)("span",{children:function(e){if(e)return e.slice(0,1).toUpperCase()+"."}(i.lastName)})]}),Object(X.jsx)("p",{className:"comments__item-date",children:Le(n)})]}),Object(X.jsx)("div",{className:"comments__item-comment",children:Object(X.jsx)("p",{className:"comments__item-text",children:t})})]})]}),s===a&&Object(X.jsx)("div",{className:"comments__item-close",onClick:function(){return c(r)},children:Object(X.jsxs)("svg",{width:"27",height:"24",viewBox:"0 0 27 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(X.jsx)("rect",{y:"22.6484",width:"34.4826",height:"1",rx:"0.5",transform:"rotate(-41.057 0 22.6484)",fill:"white"}),Object(X.jsx)("rect",{width:"34.4826",height:"1",rx:"0.5",transform:"matrix(-0.754056 -0.65681 -0.65681 0.754056 26.6582 22.6484)",fill:"white"})]})})]})})},Ae=n(17),Be=n.n(Ae),qe="comments/",Pe={createComment:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post(qe,t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getComments:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(qe,{params:{orderBy:"productId",equalTo:"".concat(t)}});case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchAll:function(){var e=Object(j.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get(qe);case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),removeComment:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.delete(qe+t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ue=Pe,He=Object(m.createSlice)({name:"comments",initialState:{entities:null,isLoading:!0,error:null},reducers:{commentsRequested:function(e){e.isLoading=!0},commentsReceived:function(e,t){e.entities=t.payload,e.isLoading=!1},commentsReceivedError:function(e,t){e.error=t.payload,e.isLoading=!1},commentCreated:function(e,t){e.entities.push(t.payload)},commentRemoved:function(e,t){e.entities=e.entities.filter((function(e){return e._id!==t.payload}))}}}),Je=He.reducer,Ye=He.actions,Ve=Ye.commentsRequested,We=Ye.commentsReceived,Ze=Ye.commentsReceivedError,Ke=Ye.commentCreated,$e=Ye.commentRemoved,Ge=Object(m.createAction)("comments/addCommentRequested"),Xe=Object(m.createAction)("comments/removeCommentRequested"),Qe=Object(m.createAction)("comments/checkCommentRequested");function et(){return function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Qe()),e.prev=1,e.next=4,Ue.fetchAll();case 4:r=e.sent,(a=r.content)?(c=a.filter((function(e){return e.userId===function(e){if(e.users.auth)return e.users.auth.userId}(n())})),t(K({amountReviews:c.length}))):t(K({amountReviews:1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(Ze(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()}var tt=Je,nt=function(e){var t=e.productId,n=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),a=Object(u.c)((function(e){return e.comments.entities})),c=Object(u.b)();Object(r.useEffect)((function(){c(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Ve()),t.prev=1,t.next=4,Ue.getComments(e);case 4:r=t.sent,a=r.content,n(We(a)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(Ze(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);var s=Object(u.c)((function(e){return e.comments.isLoading})),i=function(e){c(function(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Xe()),t.prev=1,t.next=4,Ue.removeComment(e);case 4:t.sent.content||(n($e(e)),n(et())),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(Ze(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(e))},o=Object(Ae.orderBy)(a,["created_at"],["desc"]);return Object(X.jsxs)("div",{className:"comments",children:[Object(X.jsx)("h2",{className:"comments__title",children:"\u041e\u0442\u0437\u044b\u0432\u044b"}),!s&&o.map((function(e){return Object(X.jsx)(Me,Object(C.a)(Object(C.a)({},e),{},{onRemove:i}),e._id)})),!s&&0===o.length&&Object(X.jsx)("h2",{className:"comments__subtitle",children:n?"\u0415\u0449\u0435 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043e\u0442\u0437\u044b\u0432 \u043e \u0442\u043e\u0432\u0430\u0440\u0435. \u0411\u0443\u0434\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c!":"\u0415\u0449\u0435 \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043e\u0442\u0437\u044b\u0432 \u043e \u0442\u043e\u0432\u0430\u0440\u0435..."}),Object(X.jsx)(Fe,{onSubmit:function(e,t){var r;c((r=Object(C.a)(Object(C.a)({},e),{},{productId:t,userId:n}),function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(Ge()),e.prev=1,e.next=4,Ue.createComment(r);case 4:n=e.sent,a=n.content,t(Ke(a)),t(et()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Ze(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))},productId:t})]})},rt={categories:["\u041e\u0431\u0443\u0432\u044c","\u041e\u0434\u0435\u0436\u0434\u0430","\u0413\u043e\u043b\u043e\u0432\u043d\u044b\u0435 \u0443\u0431\u043e\u0440\u044b","\u0421\u043f\u043e\u0440\u0442\u0438\u0432\u043d\u044b\u0439 \u0438\u043d\u0432\u0435\u043d\u0442\u0430\u0440\u044c","\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b","\u0414\u0435\u0442\u0441\u043a\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435","\u041c\u043e\u043b\u043e\u0447\u043d\u0430\u044f \u043f\u0440\u043e\u0434\u0443\u043a\u0446\u0438\u044f","\u0421\u043f\u043e\u0440\u0442\u0438\u0432\u043d\u043e\u0435 \u043f\u0438\u0442\u0430\u043d\u0438\u0435"],sort:{price:"\u0426\u0435\u043d\u0430",name:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",rating:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0442\u043e\u0432\u0430\u0440\u0430",reviews:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0437\u044b\u0432\u043e\u0432"},messages:{addToBasket:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",addToFavourite:"\u0427\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u043e\u0432\u0430\u0440 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}};var at=function(e){return Date.now()-e>6e5},ct={get:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.get("products/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},st=ct,it=Object(m.createSlice)({name:"products",initialState:{entities:null,isLoading:!0,error:null,lastFetch:null},reducers:{productsRequested:function(e){e.isLoading=!0},productsReceived:function(e,t){e.entities=t.payload,e.isLoading=!1,e.lastFetch=Date.now()},productsReceivedError:function(e,t){e.error=t.payload,e.isLoading=!1}}}),ot=it.reducer,ut=it.actions,lt=ut.productsRequested,dt=ut.productsReceived,jt=ut.productsReceivedError,mt=ot;function bt(e){var t=document.querySelector("body"),n=document.createElement("div");n.className="error-modal",n.textContent=e,t.append(n),setTimeout((function(){n.remove()}),3e3)}var ht=function(e){var t=e.productId,n=Object(u.b)(),a=Object(u.c)((function(e){return e.products.entities})),c=Object(u.c)((function(e){return e.products.error}));c&&bt(c);var s=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),o=Object(r.useState)(),l=Object(i.a)(o,2),d=l[0],j=l[1];Object(r.useEffect)((function(){a&&j(a.find((function(e){return e._id===t})))}),[a]);var m=Object(r.useState)(1),b=Object(i.a)(m,2),h=b[0],f=b[1],p=Object(u.c)(se(t));return Object(X.jsx)("main",{className:"shop",children:Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(ze,{name:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c"}),d?Object(X.jsxs)("section",{className:"shop__item",children:[Object(X.jsxs)("div",{className:"shop__item-body item-body",children:[Object(X.jsxs)("div",{className:"item-body__flex",children:[Object(X.jsx)("div",{className:"item-body__column-left",children:Object(X.jsx)("img",{src:d.imgSrc,alt:"product"})}),Object(X.jsxs)("div",{className:"item-body__column-right",children:[Object(X.jsxs)("h2",{className:"item-body__title title",children:[d.name,""!==d.taste&&Object(X.jsxs)("span",{children:[" (",d.taste,")"]})]}),Object(X.jsxs)("div",{className:"item-body__amount",children:[Object(X.jsx)("div",{className:"item-body__amount-minus",onClick:function(){h>=1&&f((function(e){return e-1}))},children:"-"}),Object(X.jsx)("div",{className:"item-body__amount-number",children:h}),Object(X.jsx)("div",{className:"item-body__amount-plus",onClick:function(){f((function(e){return e+1}))},children:"+"})]}),Object(X.jsxs)("div",{className:"item-body__sum",children:[d.price," \u0440\u0443\u0431."]}),s&&Object(X.jsx)("button",{className:"item-body__buy",onClick:function(){return n(ve(d,h))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"}),!s&&Object(X.jsx)("button",{className:"item-body__buy",onClick:function(){return bt(rt.messages.addToBasket)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})]}),Object(X.jsx)("div",{className:"product__favorites"+(p?" product__favorites-active":""),onClick:s?function(){return n(ie(d))}:function(){return bt(rt.messages.addToFavourite)},children:Object(X.jsx)("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(X.jsx)("path",{d:"M6.54597 0.984332C6.72468 0.596896 7.27532 0.596897 7.45403 0.984332L8.85773 4.02756C8.93057 4.18546 9.08021 4.29418 9.25289 4.31466L12.5809 4.70925C13.0046 4.75949 13.1748 5.28318 12.8615 5.57286L10.401 7.84827C10.2734 7.96634 10.2162 8.14225 10.2501 8.31281L10.9032 11.5999C10.9864 12.0184 10.5409 12.342 10.1686 12.1336L7.24422 10.4967C7.09248 10.4118 6.90752 10.4118 6.75578 10.4967L3.8314 12.1336C3.45909 12.342 3.01361 12.0184 3.09676 11.5999L3.74991 8.31281C3.78379 8.14225 3.72664 7.96634 3.59897 7.84827L1.13846 5.57286C0.825207 5.28318 0.995366 4.75949 1.41906 4.70925L4.74711 4.31466C4.91979 4.29418 5.06943 4.18546 5.14227 4.02756L6.54597 0.984332Z",fill:"white"})})})]}),Object(X.jsx)("div",{className:"shop__item-comments",children:Object(X.jsx)(nt,{productId:t})})]}):"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0442\u043e\u0432\u0430\u0440\u0435..."]})})},ft=function(e){var t=e.clearCategory,n=e.changeCategoryItems,a=e.selectedCategoryItem,c=Object(r.useState)(!1),s=Object(i.a)(c,2),o=s[0],u=s[1],l=document.querySelector(".category"),d=document.querySelector(".overlay"),j=document.querySelector("body"),m=function(){l.classList.toggle("category-active"),d.classList.toggle("overlay-active"),j.classList.toggle("lock"),u((function(e){return!e}))};return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("button",{className:"category__open item-body__buy",onClick:m,children:[o?"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"," \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"]}),Object(X.jsx)("div",{className:"overlay",onClick:m}),Object(X.jsxs)("article",{className:"content__category category",children:[Object(X.jsx)("h2",{className:"category__title title",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438:"}),Object(X.jsx)("div",{className:"category__items",children:rt.categories?rt.categories.map((function(e){return Object(X.jsx)("button",{className:"category__item hover"+(e===a?" category__item-active":""),onClick:function(){return n(e)},children:e},e)})):"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}),Object(X.jsx)("div",{className:"category__reset",onClick:t,children:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440"})]})]})},pt=function(e){var t=e.onSort,n=e.currentSort;return Object(X.jsxs)("div",{className:"content__sort sort",children:[Object(X.jsx)("h2",{className:"sort__title title",children:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"}),Object(X.jsx)("div",{className:"sort__items",children:rt.sort?Object.keys(rt.sort).map((function(e){return Object(X.jsx)("p",{onClick:function(r){return function(e,r){var a=document.querySelectorAll(".sort__item"),c=e.target;c.classList.contains("sort__item-active")?a.forEach((function(e){e.classList.remove("sort__item-active"),e.classList.remove("sort__item-active-rotate"),c.classList.add("sort__item-active-rotate")})):(a.forEach((function(e){e.classList.remove("sort__item-active"),e.classList.remove("sort__item-active-rotate")})),c.classList.toggle("sort__item-active")),r===n.iter?t(Object(C.a)(Object(C.a)({},n),{},{order:"asc"===n.order?"desc":"asc"})):t({iter:r,order:"asc"})}(r,e)},className:"sort__item hover",children:rt.sort[e]},e)})):"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})},Ot=function(e){var t=e.searchValue,n=e.changeValueSearch;return Object(X.jsx)("section",{className:"shop__search search",children:Object(X.jsx)("form",{action:"#",className:"search__form",children:Object(X.jsx)("input",{type:"text",className:"search__input",placeholder:"\u041f\u043e\u0438\u0441\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432",value:t,onChange:function(e){return n(e)}})})})},vt=function(e){var t=e.product,n=Object(u.b)();Object(u.c)((function(e){return e.products.error}))&&bt();var r,a,c=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId})),s=Object(u.c)(se(t._id));return r=0===Number(t.reviews)||Number(t.reviews)%10===0?"\u043e\u0442\u0437\u044b\u0432\u043e\u0432":1===Number(t.reviews)?"\u043e\u0442\u0437\u044b\u0432":"\u043e\u0442\u0437\u044b\u0432\u0430",t.rating>=4.8&&t.rating<=5?a="green":t.rating>=4.3&&t.rating<=4.7?a="lightgreen":t.rating>=3.8&&t.rating<=4.2?a="yellow":t.rating<=3.7&&(a="red"),Object(X.jsxs)("div",{className:"products__product product",children:[Object(X.jsxs)("div",{className:"product__flex",children:[Object(X.jsx)(o.a,{to:"/products/".concat(t._id),children:Object(X.jsx)("div",{className:"product__column-left",children:Object(X.jsx)("img",{src:t.imgSrc,alt:"img"})})}),Object(X.jsxs)("div",{className:"product__column-right",children:[Object(X.jsxs)("h2",{className:"product__title title",children:[t.name,""!==t.taste&&Object(X.jsxs)("span",{children:[" (",t.taste,")"]})]}),Object(X.jsxs)("div",{className:"product__people",children:[Object(X.jsxs)("div",{className:"product__rating",children:[Object(X.jsx)("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(X.jsx)("path",{d:"M6.54597 0.984332C6.72468 0.596896 7.27532 0.596897 7.45403 0.984332L8.85773 4.02756C8.93057 4.18546 9.08021 4.29418 9.25289 4.31466L12.5809 4.70925C13.0046 4.75949 13.1748 5.28318 12.8615 5.57286L10.401 7.84827C10.2734 7.96634 10.2162 8.14225 10.2501 8.31281L10.9032 11.5999C10.9864 12.0184 10.5409 12.342 10.1686 12.1336L7.24422 10.4967C7.09248 10.4118 6.90752 10.4118 6.75578 10.4967L3.8314 12.1336C3.45909 12.342 3.01361 12.0184 3.09676 11.5999L3.74991 8.31281C3.78379 8.14225 3.72664 7.96634 3.59897 7.84827L1.13846 5.57286C0.825207 5.28318 0.995366 4.75949 1.41906 4.70925L4.74711 4.31466C4.91979 4.29418 5.06943 4.18546 5.14227 4.02756L6.54597 0.984332Z",fill:a})}),Object(X.jsx)("p",{children:t.rating})]}),Object(X.jsxs)("div",{className:"product__reviews",children:[t.reviews," ",r]})]}),Object(X.jsxs)("div",{className:"product__price",children:[t.price," \u0440\u0443\u0431."]}),Object(X.jsx)("button",{className:"product__add-basket item-body__buy",onClick:c?function(){return n(ve(t))}:function(){return bt(rt.messages.addToBasket)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})]}),Object(X.jsx)("div",{className:"product__favorites"+(s?" product__favorites-active":""),onClick:c?function(){return n(ie(t))}:function(){return bt(rt.messages.addToFavourite)},children:Object(X.jsx)("svg",{width:"14",height:"13",viewBox:"0 0 14 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(X.jsx)("path",{d:"M6.54597 0.984332C6.72468 0.596896 7.27532 0.596897 7.45403 0.984332L8.85773 4.02756C8.93057 4.18546 9.08021 4.29418 9.25289 4.31466L12.5809 4.70925C13.0046 4.75949 13.1748 5.28318 12.8615 5.57286L10.401 7.84827C10.2734 7.96634 10.2162 8.14225 10.2501 8.31281L10.9032 11.5999C10.9864 12.0184 10.5409 12.342 10.1686 12.1336L7.24422 10.4967C7.09248 10.4118 6.90752 10.4118 6.75578 10.4967L3.8314 12.1336C3.45909 12.342 3.01361 12.0184 3.09676 11.5999L3.74991 8.31281C3.78379 8.14225 3.72664 7.96634 3.59897 7.84827L1.13846 5.57286C0.825207 5.28318 0.995366 4.75949 1.41906 4.70925L4.74711 4.31466C4.91979 4.29418 5.06943 4.18546 5.14227 4.02756L6.54597 0.984332Z",fill:"white"})})})]})},gt=function(e){var t=e.allAmountProducts,n=e.sizeOnePage,r=e.pageChange,a=e.currentPage,c=Math.ceil(t/n);if(1===c)return null;var s=Be.a.range(1,c+1);return Object(X.jsx)("nav",{children:Object(X.jsx)("ul",{className:"pagination",children:s.map((function(e){return Object(X.jsx)("li",{className:"pagination__item"+(e===a?"-active":""),children:Object(X.jsx)("button",{className:"pagination__link",onClick:function(){return r(e)},children:e})},e)}))})})};var _t=function(){var e=Object(u.c)((function(e){return e.products.entities})),t=Object(r.useState)({iter:"",order:""}),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(1),o=Object(i.a)(s,2),l=o[0],d=o[1],j=Object(r.useState)(),m=Object(i.a)(j,2),b=m[0],h=m[1],f=Object(r.useState)(""),p=Object(i.a)(f,2),O=p[0],v=p[1],g=Object(r.useState)(),_=Object(i.a)(g,2),x=_[0],N=_[1];Object(r.useEffect)((function(){d(1)}),[b]);var k;Object(r.useEffect)((function(){O.length>0&&N(e.filter((function(e){return e.name.toLowerCase().replace(/\s+/g,"").includes(O.toLowerCase().trim())})))}),[O]),k=b?e.filter((function(e){return e.category===b})):O.length>0?x:e;var w,y=Be.a.orderBy(k,[a.iter],[a.order]),S=k?k.length:0,C=function(e,t,n){var r=(t-1)*n;return Be()(e).slice(r).take(n).value()}(y,l,3);return w=e?C.map((function(e){return Object(X.jsx)(vt,{product:e},e._id)})):"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0442\u0438\u0442\u0435...",Object(X.jsx)("main",{className:"shop",children:Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(Ot,{searchValue:O,changeValueSearch:function(e){v((function(){return e.target.value})),h(),d(1)}}),Object(X.jsxs)("section",{className:"shop__content content",children:[Object(X.jsx)(ft,{selectedCategoryItem:b,changeCategoryItems:function(e){h(e),d(1),v("")},clearCategory:function(){h()}}),Object(X.jsxs)("article",{className:"content__body",children:[Object(X.jsx)(pt,{onSort:function(e){c(e)},currentSort:a}),Object(X.jsx)("article",{className:"content__products products",children:w}),Object(X.jsx)(gt,{allAmountProducts:S,sizeOnePage:3,pageChange:function(e){d(e)},currentPage:l})]})]})]})})},xt=function(){var e=Object(Ie.useParams)().productId;return e?Object(X.jsx)(ht,{productId:e}):Object(X.jsx)(_t,{})},Nt=function(){return Object(X.jsx)("main",{className:"error",children:Object(X.jsxs)("article",{className:"error-404",children:[Object(X.jsx)("h1",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 404"}),Object(X.jsx)("h2",{children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(X.jsx)(o.a,{to:"/products",children:Object(X.jsx)("span",{className:"error-return",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})})]})})},kt=function(){var e,t=Object(u.c)((function(e){return e.products.entities})),n=Object(u.c)((function(e){return e.favourites.entities}));return e=n&&0===n.length?Object(X.jsx)("h2",{className:"shop__basket-title",children:"\u0412\u044b \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}):t&&n?n.map((function(e){return Object(X.jsx)(vt,{product:e},e._id)})):"\u041f\u043e\u0445\u043e\u0436\u0435, \u0447\u0442\u043e \u0432\u044b \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435...",Object(X.jsx)("main",{className:"shop",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("section",{className:"shop__basket",children:[Object(X.jsx)(ze,{name:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c"}),Object(X.jsx)("h2",{className:"shop__basket-title title",children:"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"}),Object(X.jsx)("div",{children:e})]})})})},wt=n(44),yt=n(29),St=function(){var e="\u041d\u0435 \u043d\u0430\u0447\u0430\u0442\u043e",t="\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435...",n="\u0413\u043e\u0442\u043e\u0432\u043e",a="\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",c=Object(r.useState)(null),s=Object(i.a)(c,2),o=s[0],u=s[1],l=Object(r.useState)(e),m=Object(i.a)(l,2),b=m[0],h=m[1],f=Object(r.useState)(0),p=Object(i.a)(f,2),O=p[0],v=p[1],g=Object(r.useState)(0),_=Object(i.a)(g,2),x=_[0],N=_[1],k=yt.length,w=function(){N((function(e){return e+1}))};function y(){return(y=Object(j.a)(d.a.mark((function e(){var t,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=Object(wt.a)(yt),e.prev=2,t.s();case 4:if((n=t.n()).done){e.next=11;break}return r=n.value,e.next=8,L.put("products/"+r._id,r);case 8:w();case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(0),u(e.t1),h(a);case 25:case"end":return e.stop()}}),e,null,[[0,21],[2,13,16,19]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){0!==x&&b===e&&h(t);var r=Math.floor(x/k*100);O<r&&v((function(){return r})),100===r&&h(n)}()}),[x]),{error:o,initialize:function(){return y.apply(this,arguments)},progress:O,status:b}},Ct=function(){var e=St(),t=e.error,n=e.initialize,r=e.progress,a=e.status;return Object(X.jsx)("main",{className:"initialize",children:Object(X.jsx)("div",{className:"container",children:Object(X.jsxs)("div",{className:"initialize__body",children:[Object(X.jsx)("h1",{className:"initialize__title",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),Object(X.jsxs)("h3",{className:"initialize__subtitle",children:["\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445",k.isFireBase?"\u0432 FireBase":"\u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440"]}),Object(X.jsxs)("ul",{children:[Object(X.jsxs)("li",{children:["\u0421\u0442\u0430\u0442\u0443\u0441: ",a]}),Object(X.jsxs)("li",{children:["\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441: ",r,"%"]}),t&&Object(X.jsxs)("li",{className:"initialize__error",children:["\u041e\u0448\u0438\u0431\u043a\u0430: ",t]})]}),Object(X.jsx)("button",{className:"initialize__btn",onClick:function(){n()},children:"\u0418\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})})})},It=n(45),Lt=["component","children"],Rt=function(e){var t=e.component,n=e.children,r=Object(It.a)(e,Lt),a=Object(u.c)((function(e){return e.users.isLoggedIn}));return Object(X.jsx)(Ie.Route,Object(C.a)(Object(C.a)({},r),{},{render:function(e){return a?t?Object(X.jsx)(t,Object(C.a)({},e)):n:Object(X.jsx)(Ie.Redirect,{to:{pathname:"/authorization",state:{from:e.location.pathname}}})}}))},Et=function(){return Object(X.jsx)("div",{className:"global-loading",children:Object(X.jsx)("div",{className:"global-loading__circle"})})},zt=function(e){var t=e.children,n=Object(u.b)(),a=Object(u.c)((function(e){return e.users.dataLoaded}));return Object(r.useEffect)((function(){a||n(W())}),[]),a?t:Object(X.jsx)(Et,{})},Dt=function(){var e=Object(Ie.useHistory)(),t=Object(u.c)((function(e){if(e.users.auth)return e.users.entities.find((function(t){return t._id===e.users.auth.userId}))})),n=Object(u.b)(),a=Object(r.useState)({name:t.name||"",lastName:t.lastName||"",_id:t._id}),c=Object(i.a)(a,2),s=c[0],o=c[1],l=Object(r.useState)(),d=Object(i.a)(l,2),j=d[0],m=d[1],b=function(e){var t=e.target;o((function(e){return Object(C.a)(Object(C.a)({},e),{},Object(Ne.a)({},t.name,t.value))}))};return Object(X.jsx)("main",{className:"shop",children:Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(ze,{name:"\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),Object(X.jsx)("section",{className:"profile",children:Object(X.jsxs)("div",{className:"profile__flex",children:[Object(X.jsx)("article",{className:"profile__flex-left",children:Object(X.jsx)("img",{src:t.img||G,alt:"user"})}),Object(X.jsx)("article",{className:"profile__flex-right",children:Object(X.jsxs)("form",{action:"put",className:"profile__form",onSubmit:function(e){e.preventDefault();var t=Object(C.a)(Object(C.a)({},s),{},{name:s.name,lastName:s.lastName});try{n(K(t))}catch(r){m(r)}},children:[Object(X.jsxs)("div",{className:"profile__item",children:[Object(X.jsx)("p",{className:"profile__item-label",children:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f:"}),Object(X.jsx)(Se,{name:"name",value:s.name,onChange:b,error:j,messagePlaceholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f",classNameInput:"profile__item-input authorization__email"})]}),Object(X.jsxs)("div",{className:"profile__item",children:[Object(X.jsx)("p",{className:"profile__item-label",children:"\u0412\u0430\u0448a \u0444\u0430\u043c\u0438\u043b\u0438\u044f:"}),Object(X.jsx)(Se,{name:"lastName",value:s.lastName,onChange:b,error:j,messagePlaceholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",classNameInput:"profile__item-input authorization__email"})]}),t&&Object(X.jsx)("div",{className:"profile__item",children:Object(X.jsx)("button",{type:"submit",className:"authorization__submit"+(s.name.length<3?" authorization__submit-not-active":""),onClick:e.goBack,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})]})})]})})},Tt=function(e){var t,n=e.profileId,a=Object(u.c)((function(e){if(e.users.auth)return e.users.entities.find((function(t){return t._id===e.users.auth.userId}))})),c=Object(u.c)((t=n,function(e){return e.users.entities.find((function(e){return e._id===t}))})),s=Object(r.useState)(),l=Object(i.a)(s,2),d=l[0],j=l[1],m=Object(u.b)();return Object(r.useEffect)((function(){m(et())}),[]),Object(r.useEffect)((function(){j(c)}),[a,c]),Object(X.jsx)(X.Fragment,{children:d?Object(X.jsx)("main",{className:"shop",children:Object(X.jsxs)("div",{className:"container",children:[Object(X.jsx)(ze,{name:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c"}),Object(X.jsx)("section",{className:"profile",children:Object(X.jsxs)("div",{className:"profile__flex",children:[Object(X.jsx)("article",{className:"profile__flex-left",children:Object(X.jsx)("img",{src:d.img?d.img:G,alt:"user"})}),Object(X.jsxs)("article",{className:"profile__flex-right",children:[Object(X.jsxs)("div",{className:"profile__item",children:[Object(X.jsx)("p",{className:"profile__item-label",children:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(X.jsx)("p",{className:"profile__item-name",children:d.name})]}),d.lastName.length>0&&Object(X.jsxs)("div",{className:"profile__item",children:[Object(X.jsx)("p",{className:"profile__item-label",children:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"}),Object(X.jsx)("p",{className:"profile__item-name",children:d.lastName})]}),Object(X.jsxs)("div",{className:"profile__item",children:[Object(X.jsx)("p",{className:"profile__item-label",children:"\u041d\u0430 \u0441\u0430\u0439\u0442\u0435 \u0441:"}),Object(X.jsx)("p",{className:"profile__item-name",children:d.registerDate})]}),Object(X.jsxs)("div",{className:"profile__item",children:[Object(X.jsx)("p",{className:"profile__item-label",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u043b \u043e\u0442\u0437\u044b\u0432\u043e\u0432:"}),Object(X.jsx)("p",{className:"profile__item-name",children:d.amountReviews})]}),c._id===a._id&&Object(X.jsx)("div",{className:"profile__item",children:Object(X.jsx)(o.a,{to:"/profile/".concat(a._id,"/edit"),className:"profile__item-edit",children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]})]})})]})}):Object(X.jsx)(Et,{})})},Ft=function(){var e=Object(Ie.useParams)(),t=e.profileId,n=e.edit,r=Object(u.c)((function(e){if(e.users.auth)return e.users.auth.userId}));return Object(X.jsx)(zt,{children:t?n?t===r?Object(X.jsx)(Dt,{}):Object(X.jsx)(Ie.Redirect,{to:"/profile/".concat(r,"/edit")}):Object(X.jsx)(Tt,{profileId:t}):Object(X.jsx)(xt,{})})},Mt=function(){var e=Object(u.b)();return Object(r.useEffect)((function(){e((function(e){N.removeAuthData(),e(J()),f.push("/products")}))}),[]),Object(X.jsx)(Et,{})},At=function(e){var t=e.children,n=Object(u.b)(),a=Object(u.c)((function(e){return e.users.isLoading})),c=Object(u.c)((function(e){return e.users.isLoggedIn}));return Object(r.useEffect)((function(){n((function(e,t){e(ce());var n=function(e){if(e.users.auth)return e.users.auth.userId}(t()),r=JSON.parse(localStorage.getItem("productsFavorite-".concat(n)));r&&(e(re(r)),e(ae(r.length)))})),n((function(e,t){e(Oe());var n=function(e){if(e.users.auth)return e.users.auth.userId}(t()),r=JSON.parse(localStorage.getItem("productsBasket-".concat(n)));if(r){e(je(r));var a=0;r.forEach((function(e){a+=e.value})),e(me(a)),e(pe(ge(r)))}})),n(function(){var e=Object(j.a)(d.a.mark((function e(t,n){var r,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n().products.lastFetch,!at(r)){e.next=14;break}return t(lt()),e.prev=3,e.next=6,st.get();case 6:a=e.sent,c=a.content,t(dt(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t(jt(e.t0));case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}()),n(W())}),[c]),a?Object(X.jsx)(Et,{}):t},Bt=function(){return Object(X.jsx)("div",{className:"wrapper",children:Object(X.jsxs)(At,{children:[Object(X.jsx)(xe,{}),Object(X.jsxs)(Ie.Switch,{children:[Object(X.jsx)(Rt,{path:"/basket",component:Te}),Object(X.jsx)(Ie.Route,{path:"/favorites",component:kt}),Object(X.jsx)(Ie.Route,{path:"/products/:productId?",component:xt}),Object(X.jsx)(Rt,{path:"/profile/:profileId?/:edit?",component:Ft}),Object(X.jsx)(Ie.Route,{path:"/404",component:Nt}),Object(X.jsx)(Ie.Route,{path:"/registration",component:Re}),Object(X.jsx)(Ie.Route,{path:"/signout",component:Mt}),Object(X.jsx)(Ie.Route,{path:"/authorization",exact:!0,component:Ce}),Object(X.jsx)(Ie.Route,{path:"/",exact:!0,component:_t}),Object(X.jsx)(Ie.Route,{path:"/initialize",component:Ct}),Object(X.jsx)(Ie.Redirect,{to:"/404"})]}),Object(X.jsx)(Ee,{})]})})},qt=n(10),Pt=qt.combineReducers,Ut=qt.configureStore,Ht=(0,qt.getDefaultMiddleware)({serializableCheck:!1}),Jt=Pt({products:mt,users:$,comments:tt,favourites:oe,basket:_e});var Yt=Ut({reducer:Jt,middleware:Ht});s.a.render(Object(X.jsx)(a.a.StrictMode,{children:Object(X.jsx)(u.a,{store:Yt,children:Object(X.jsx)(Ie.Router,{history:f,children:Object(X.jsx)(Bt,{})})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.2f6d7ea2.chunk.js.map